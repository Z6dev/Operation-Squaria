import{h as w}from"./kaplay-C3HUSnHg.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function p(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=p(t);fetch(t.href,s)}})();w({background:[30,30,30],debug:!0,debugKey:"1"});setLayers(["background","game","ui"],"game");scene("main",()=>{flash(rgb(200,200,200),.8),setBackground(rgb(30,30,30)),setCamScale(1.2),loadSprite("Backer","/sprites/brickedas.png"),debug.log("Welcome!");function r(o,a=[rgb(255,255,255)]){let i=add([pos(o),particles({max:30,lifeTime:[1.2,.8],colors:a,speed:[100,150],angle:[0,360],opacities:[1,0],scales:[1,.1]},{direction:-90,spread:360,rate:5}),timer(),"explosion"]);i.emit(30),i.wait(.6,()=>{destroy(i)})}add([sprite("Backer",{tiled:!0,width:1600,height:900}),color(241,0,120),layer("background")]);const e=add([health(5),rect(20,20),pos(200,100),color(255,255,255),opacity(1),outline(2,rgb(0,0,0)),anchor("center"),area(),body({drag:7}),rotate(0),{speed:2150,canDash:!0,isInvincible:!1}]);let p=.2,l=0,t=0;e.onUpdate(()=>{let o=toWorld(mousePos());t+=dt(),isKeyDown("w")&&e.addForce(vec2(0,-e.speed)),isKeyDown("s")&&e.addForce(vec2(0,e.speed)),isKeyDown("a")&&e.addForce(vec2(-e.speed,0)),isKeyDown("d")&&e.addForce(vec2(e.speed,0)),e.pos.x=clamp(e.pos.x,0,1600),e.pos.y=clamp(e.pos.y,0,900),setCamPos(lerp(getCamPos(),e.pos.add((mousePos().x-width()/2)/8,(mousePos().y-height()/2)/8),.2)),e.angle=-Math.atan2(o.x-e.pos.x,o.y-e.pos.y)*180/Math.PI,isMouseDown("left")&&t>=p&&(t=0,s()),e.hp()<=0&&go("gameover")}),onKeyPress("space",()=>{e.canDash===!0&&(e.speed*=8,e.isInvincible=!0,e.canDash=!1,e.opacity=.6,r(e.pos),setTimeout(()=>{e.speed=2150,e.isInvincible=!1,e.opacity=1},120),setTimeout(()=>{e.canDash=!0},800))});function s(o=!1,a,i,f,b){o?add([circle(8,8),health(1),pos(i.pos),color(255,0,255),area(),move(a,800),offscreen({destroy:!0}),{originColor:rgb(255,0,255)},"bullet","hostile"]):add([rect(8,8),pos(e.pos||i.pos),color(255,255,0),area(),rotate(e.angle),move(e.angle+90+rand(-4,4)||a,1400),offscreen({destroy:!0}),{originColor:rgb(255,255,0)},"bullet","friendly"])}let c=!1,g=!1;loop(2,()=>{c||y()});function y(o=5,a=180,i=rgb(241,0,120),f=rgb(0,0,0),b=18){let m=Math.floor(rand(0,4)),n,d;switch(m){case 0:n=rand(0,1600),d=-20;break;case 1:n=width()+20,d=rand(0,900);break;case 2:n=rand(0,1600),d=height()+20;break;case 3:n=-20,d=rand(0,900);break}add([health(o),circle(b),pos(n,d),color(i),outline(2,f),area(),timer(),{speed:a,originColor:rgb(241,0,120)},"hostile","enemy"])}onUpdate("hostile",o=>{const a=e.pos.sub(o.pos).unit();o.move(a.scale(o.speed)),l>=12&&g===!1&&(add([health(65),circle(38,38),rotate(0),pos(width()/2,0),color(rgb(255,0,100)),outline(4,rgb(225,0,255)),area(),timer(),{speed:120,originColor:rgb(255,0,100)},"hostile","enemy","boss","RayCon"]),debug.error("BEHOLD! THE POWER OF A JUGGERNAUT!"),g=!0,c=!0)});let u=0,h=0;onUpdate("RayCon",o=>{let a=e.pos.sub(o.pos).unit().angle();if(u+=dt(),onUpdate("beam",i=>{i.pos=o.pos,i.angle=lerp(i.angle,a,.1)}),u>2){switch(h){case 0:add([rect(2e3,6),pos(o.pos),anchor("left"),rotate(a),color(255,0,0),opacity(),scale(1),lifespan(2),"beam"]),wait(2,()=>{add([rect(2e3,30),pos(o.pos),anchor("left"),rotate(a),area(),lifespan(.2,{fade:.1}),color(255,181,77),scale(1,1),opacity(),"hostile","beam"]),r(o.pos),shake(18),flash(rgb(255,181,77),.2)});break;case 1:loop(.1,()=>{s(!0,a,o),a=e.pos.sub(o.pos).unit().angle()},12);break}u=0,h=Math.floor(rand(0,2))}}),e.onCollideUpdate("hostile",o=>{e.isInvincible||(e.hurt(1),e.isInvincible=!0,e.opacity=.6,r(e.pos),shake(8),wait(.6,()=>{e.isInvincible=!1,e.opacity=1}))}),e.onDeath(()=>{go("gameover")}),onCollide("friendly","enemy",(o,a)=>{o.destroy(),r(a.pos,[rgb(255,100,100),rgb(255,0,0)]),a.hurt(1)}),on("hurt","enemy",o=>{o.color=rgb(255,255,255),wait(.1,()=>{o.color=o.originColor})}),on("death","enemy",o=>{o.destroy(),shake(8),addKaboom(o.pos),l+=1}),on("death","boss",o=>{debug.error("AAAAAAAA-"),debug.log("Defeated RayCon, Healed Max HP"),o.destroy(),shake(108),e.heal(5-e.hp()),addKaboom(o.pos,{scale:3.5,speed:.6}),l+=1,c=!1}),onDraw(()=>{drawText({text:"Score: "+l,pos:vec2(0,0),size:24,layer:"ui",fixed:!0}),drawRect({pos:vec2(0,30),width:140,height:20,color:rgb(200,200,200),layer:"ui",fixed:!0}),drawRect({pos:vec2(0,30),width:e.hp()/2.5*70,height:20,color:rgb(255,0,0),layer:"ui",fixed:!0})})});scene("gameover",()=>{setBackground(rgb(0,0,0));let r=add([rect(200,80),pos(width()/2-8,400),scale(1),anchor("center"),color(241,0,120),area(),outline(8,rgb(204,32,142)),"button"]);r.onClick(()=>{go("menu")}),onUpdate(()=>{r.isHovering()?r.scale=lerp(r.scale,vec2(1.2,1.2),.1):r.scale=lerp(r.scale,vec2(1,1),.1)}),onDraw(()=>{drawText({text:"Game Over",color:rgb(255,255,255),size:64,anchor:"center",pos:vec2(width()/2,300),layer:"ui"}),drawText({text:"Menu",color:rgb(255,255,255),size:32*r.scale.x,anchor:"center",pos:vec2(width()/2-8,400),layer:"ui"})}),flash(rgb(0,0,0),.8)});scene("menu",()=>{setBackground(rgb(30,30,30));let r=add([rect(200,80),pos(width()/2-8,400),scale(1),anchor("center"),color(241,0,120),area(),outline(8,rgb(204,32,142)),"button"]);r.onClick(()=>{go("main")}),onUpdate(()=>{r.isHovering()?r.scale=lerp(r.scale,vec2(1.2,1.2),.1):r.scale=lerp(r.scale,vec2(1,1),.1)}),onDraw(()=>{drawText({text:"PROTOCOL SQUARIA",color:rgb(255,255,255),size:64,anchor:"center",pos:vec2(width()/2,300),layer:"ui"}),drawText({text:"Play",color:rgb(255,255,255),size:32*r.scale.x,anchor:"center",pos:vec2(width()/2-8,400),layer:"ui"})}),flash(rgb(0,0,0),.8)});go("menu");
//# sourceMappingURL=index-BcZ06aAh.js.map
